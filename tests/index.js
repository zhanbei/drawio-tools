'use strict';

const converter = require('../src/converter');
const assert = require('assert');
const RAW_XML = `<mxGraphModel dx="1188" dy="658" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="583" pageHeight="827" background="#ffffff" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="21" value="" style="dashed=0;shape=rect;fillColor=#ffffff;strokeColor=none;rounded=1;shadow=0;glass=0;comic=0;fontSize=16;fontColor=#000000;align=left;" vertex="1" parent="1"><mxGeometry x="40" y="120" width="358" height="642" as="geometry"/></mxCell><mxCell id="22" value="12:30" style="dashed=0;shape=rect;align=right;fillColor=#00796B;strokeColor=none;fontColor=#FFFFFF;spacingRight=4;spacingTop=1;fontStyle=0;fontSize=13;resizeWidth=1;" vertex="1" parent="21"><mxGeometry width="358" height="24" relative="1" as="geometry"/></mxCell><mxCell id="23" value="" style="dashed=0;shape=mxgraph.gmdl.top_bar;fillColor=#2D3986;strokeColor=none;" vertex="1" parent="22"><mxGeometry x="1" y="0.5" width="46" height="14" relative="1" as="geometry"><mxPoint x="-92" y="-7" as="offset"/></mxGeometry></mxCell><mxCell id="24" value="Feed reader" style="dashed=0;shape=rect;strokeColor=none;fillColor=#009688;resizeWidth=1;fontSize=20;fontColor=#FFFFFF;spacingTop=-3;verticalAlign=middle;align=left;spacingLeft=72;" vertex="1" parent="21"><mxGeometry width="358" height="57" relative="1" as="geometry"><mxPoint y="24" as="offset"/></mxGeometry></mxCell><mxCell id="25" value="" style="dashed=0;shape=mxgraph.gmdl.preferences;strokeColor=none;fillColor=#00423B;" vertex="1" parent="24"><mxGeometry y="0.5" width="24" height="16" relative="1" as="geometry"><mxPoint x="16" y="-8" as="offset"/></mxGeometry></mxCell><mxCell id="26" value="" style="dashed=0;shape=mxgraph.gmdl.refresh;strokeColor=#00423B;fillColor=#00423B;strokeWidth=2;" vertex="1" parent="24"><mxGeometry x="1" y="0.5" width="16" height="16" relative="1" as="geometry"><mxPoint x="-65" y="-8" as="offset"/></mxGeometry></mxCell><mxCell id="27" value="" style="dashed=0;shape=mxgraph.gmdl.settings;strokeColor=none;fillColor=#00423B;" vertex="1" parent="24"><mxGeometry x="1" y="0.5" width="5" height="16" relative="1" as="geometry"><mxPoint x="-24" y="-8" as="offset"/></mxGeometry></mxCell><mxCell id="28" value="" style="shape=rect;fillColor=#ffffff;strokeColor=#eeeeee;shadow=0;resizeWidth=1;" vertex="1" parent="21"><mxGeometry width="358" height="103" relative="1" as="geometry"><mxPoint y="81" as="offset"/></mxGeometry></mxCell><mxCell id="29" value="Day reappeared. The tempest still raged with undiminished" style="text;whiteSpace=wrap;fontColor=#000000;verticalAlign=top;align=left;fontSize=15;spacing=16;spacingBottom=0;spacingTop=-12;resizeWidth=1;" vertex="1" parent="28"><mxGeometry width="244" height="60" relative="1" as="geometry"/></mxCell><mxCell id="30" value="Corned beef prosciutto ground..." style="text;whiteSpace=wrap;spacingLeft=16;spacingRight=16;spacing=0;fontSize=13;fontColor=#000000;spacingBottom=0;spacingTop=-5;resizeWidth=1;" vertex="1" parent="28"><mxGeometry width="244" height="20" relative="1" as="geometry"><mxPoint y="48" as="offset"/></mxGeometry></mxCell><mxCell id="31" value="10 min" style="text;whiteSpace=wrap;spacingLeft=16;spacingRight=16;spacing=0;fontSize=12;fontColor=#999999;spacingBottom=0;spacingTop=-5;resizeWidth=1;" vertex="1" parent="28"><mxGeometry width="244" height="20" relative="1" as="geometry"><mxPoint y="72" as="offset"/></mxGeometry></mxCell><mxCell id="32" value="" style="dashed=0;shape=mxgraph.gmdl.marginRect;rectMargin=12;rectMarginLeft=-12;fillColor=#BDBDBD;strokeColor=none;" vertex="1" parent="28"><mxGeometry x="244" width="112" height="103" as="geometry"/></mxCell><mxCell id="33" value="" style="shape=rect;fillColor=#ffffff;strokeColor=#eeeeee;shadow=0;resizeWidth=1;" vertex="1" parent="21"><mxGeometry width="358" height="103" relative="1" as="geometry"><mxPoint y="184" as="offset"/></mxGeometry></mxCell><mxCell id="34" value="There were some signs of a calm at noon" style="text;whiteSpace=wrap;fontColor=#000000;verticalAlign=top;align=left;fontSize=15;spacing=16;spacingBottom=0;spacingTop=-12;resizeWidth=1;" vertex="1" parent="33"><mxGeometry width="244" height="60" relative="1" as="geometry"/></mxCell><mxCell id="35" value="Things to enjoy" style="text;whiteSpace=wrap;spacingLeft=16;spacingRight=16;spacing=0;fontSize=13;fontColor=#000000;spacingBottom=0;spacingTop=-5;resizeWidth=1;" vertex="1" parent="33"><mxGeometry width="244" height="20" relative="1" as="geometry"><mxPoint y="48" as="offset"/></mxGeometry></mxCell><mxCell id="36" value="1 hr" style="text;whiteSpace=wrap;spacingLeft=16;spacingRight=16;spacing=0;fontSize=12;fontColor=#999999;spacingBottom=0;spacingTop=-5;resizeWidth=1;" vertex="1" parent="33"><mxGeometry width="244" height="20" relative="1" as="geometry"><mxPoint y="72" as="offset"/></mxGeometry></mxCell><mxCell id="37" value="" style="dashed=0;shape=mxgraph.gmdl.marginRect;rectMargin=12;rectMarginLeft=-12;fillColor=#BDBDBD;strokeColor=none;" vertex="1" parent="33"><mxGeometry x="244" width="112" height="103" as="geometry"/></mxCell><mxCell id="38" value="" style="shape=rect;fillColor=#ffffff;strokeColor=#eeeeee;shadow=0;resizeWidth=1;" vertex="1" parent="21"><mxGeometry width="358" height="103" relative="1" as="geometry"><mxPoint y="287" as="offset"/></mxGeometry></mxCell><mxCell id="39" value="Fun tropical escapes" style="text;whiteSpace=wrap;fontColor=#000000;verticalAlign=top;align=left;fontSize=15;spacing=16;spacingBottom=0;spacingTop=-12;resizeWidth=1;" vertex="1" parent="38"><mxGeometry width="244" height="60" relative="1" as="geometry"/></mxCell><mxCell id="40" value="The night was comparatively quiet. Some of the sails were again." style="text;whiteSpace=wrap;spacingLeft=16;spacingRight=16;spacing=0;fontSize=13;fontColor=#000000;spacingBottom=0;spacingTop=-5;resizeWidth=1;" vertex="1" parent="38"><mxGeometry width="244" height="20" relative="1" as="geometry"><mxPoint y="30" as="offset"/></mxGeometry></mxCell><mxCell id="41" value="1 hr" style="text;whiteSpace=wrap;spacingLeft=16;spacingRight=16;spacing=0;fontSize=12;fontColor=#999999;spacingBottom=0;spacingTop=-5;resizeWidth=1;" vertex="1" parent="38"><mxGeometry width="244" height="20" relative="1" as="geometry"><mxPoint y="72" as="offset"/></mxGeometry></mxCell><mxCell id="42" value="" style="dashed=0;shape=mxgraph.gmdl.marginRect;rectMargin=12;rectMarginLeft=-12;fillColor=#BDBDBD;strokeColor=none;" vertex="1" parent="38"><mxGeometry x="244" width="112" height="103" as="geometry"/></mxCell><mxCell id="43" value="" style="shape=rect;fillColor=#ffffff;strokeColor=#eeeeee;shadow=0;resizeWidth=1;" vertex="1" parent="21"><mxGeometry width="358" height="103" relative="1" as="geometry"><mxPoint y="390" as="offset"/></mxGeometry></mxCell><mxCell id="44" value="Pork loin sausage shankle, kielbasa bacon beef ribs" style="text;whiteSpace=wrap;fontColor=#000000;verticalAlign=top;align=left;fontSize=15;spacing=16;spacingBottom=0;spacingTop=-12;resizeWidth=1;" vertex="1" parent="43"><mxGeometry width="244" height="60" relative="1" as="geometry"/></mxCell><mxCell id="45" value="Drumstick turkey shoulder square..." style="text;whiteSpace=wrap;spacingLeft=16;spacingRight=16;spacing=0;fontSize=13;fontColor=#000000;spacingBottom=0;spacingTop=-5;resizeWidth=1;" vertex="1" parent="43"><mxGeometry width="244" height="20" relative="1" as="geometry"><mxPoint y="48" as="offset"/></mxGeometry></mxCell><mxCell id="46" value="2 hr" style="text;whiteSpace=wrap;spacingLeft=16;spacingRight=16;spacing=0;fontSize=12;fontColor=#999999;spacingBottom=0;spacingTop=-5;resizeWidth=1;" vertex="1" parent="43"><mxGeometry width="244" height="20" relative="1" as="geometry"><mxPoint y="72" as="offset"/></mxGeometry></mxCell><mxCell id="47" value="" style="dashed=0;shape=mxgraph.gmdl.marginRect;rectMargin=12;rectMarginLeft=-12;fillColor=#BDBDBD;strokeColor=none;" vertex="1" parent="43"><mxGeometry x="244" width="112" height="103" as="geometry"/></mxCell><mxCell id="48" value="" style="shape=rect;fillColor=#ffffff;strokeColor=#eeeeee;shadow=0;resizeWidth=1;" vertex="1" parent="21"><mxGeometry width="358" height="101" relative="1" as="geometry"><mxPoint y="493" as="offset"/></mxGeometry></mxCell><mxCell id="49" value="Cherry blossoms in bloom" style="text;whiteSpace=wrap;fontColor=#000000;verticalAlign=top;align=left;fontSize=15;spacing=16;spacingBottom=0;spacingTop=-12;resizeWidth=1;" vertex="1" parent="48"><mxGeometry width="244" height="60" relative="1" as="geometry"/></mxCell><mxCell id="50" value="Spring is here and we all know..." style="text;whiteSpace=wrap;spacingLeft=16;spacingRight=16;spacing=0;fontSize=13;fontColor=#000000;spacingBottom=0;spacingTop=-5;resizeWidth=1;" vertex="1" parent="48"><mxGeometry width="244" height="20" relative="1" as="geometry"><mxPoint y="30" as="offset"/></mxGeometry></mxCell><mxCell id="51" value="3 hr" style="text;whiteSpace=wrap;spacingLeft=16;spacingRight=16;spacing=0;fontSize=12;fontColor=#999999;spacingBottom=0;spacingTop=-5;resizeWidth=1;" vertex="1" parent="48"><mxGeometry width="244" height="20" relative="1" as="geometry"><mxPoint y="72" as="offset"/></mxGeometry></mxCell><mxCell id="52" value="" style="dashed=0;shape=mxgraph.gmdl.marginRect;rectMargin=12;rectMarginLeft=-12;fillColor=#BDBDBD;strokeColor=none;" vertex="1" parent="48"><mxGeometry x="244" width="112" height="103" as="geometry"/></mxCell><mxCell id="53" value="" style="dashed=0;shape=rect;strokeColor=none;fillColor=#000000;resizeWidth=1;" vertex="1" parent="21"><mxGeometry y="1" width="358" height="48" relative="1" as="geometry"><mxPoint y="-48" as="offset"/></mxGeometry></mxCell><mxCell id="54" value="" style="dashed=0;shape=mxgraph.gmdl.back;strokeColor=#ffffff;fillColor=#000000;strokeWidth=2;" vertex="1" parent="53"><mxGeometry x="0.25" y="0.5" width="14" height="14" relative="1" as="geometry"><mxPoint x="-7" y="-7" as="offset"/></mxGeometry></mxCell><mxCell id="55" value="" style="shape=ellipse;strokeColor=#ffffff;fillColor=#000000;strokeWidth=2;" vertex="1" parent="53"><mxGeometry x="0.5" y="0.5" width="14" height="14" relative="1" as="geometry"><mxPoint x="-7" y="-7" as="offset"/></mxGeometry></mxCell><mxCell id="56" value="" style="shape=rect;strokeColor=#ffffff;fillColor=#000000;strokeWidth=2;" vertex="1" parent="53"><mxGeometry x="0.75" y="0.5" width="14" height="14" relative="1" as="geometry"><mxPoint x="-7" y="-7" as="offset"/></mxGeometry></mxCell><mxCell id="57" value="&lt;span style=&quot;font-size: 24px&quot;&gt;A Diagram to Test the Drawio Tools #Converter&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=0;glass=0;comic=0;fontSize=24;fontColor=#000000;fontStyle=1" vertex="1" parent="1"><mxGeometry x="40" y="40" width="320" height="40" as="geometry"/></mxCell><mxCell id="58" value="2018-08-18 by Fisher" style="text;html=1;resizable=0;points=[];autosize=1;align=left;verticalAlign=top;spacingTop=-4;fontSize=12;fontColor=#000000;" vertex="1" parent="1"><mxGeometry x="410" y="780" width="120" height="30" as="geometry"/></mxCell></root></mxGraphModel>`;
const COMPRESSED_XML = `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`;

const xml = converter.decodeFromBase64String(COMPRESSED_XML);
assert.strictEqual(xml, RAW_XML, 'failed to decode the plain xml from the base64-encoded string.');

const compressed = converter.encodeToBase64String(RAW_XML);
assert.strictEqual(compressed, COMPRESSED_XML, 'failed to encode and compress the plain xml to the base64-encoded string.');
